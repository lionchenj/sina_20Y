function tongjiRequest(a,b,c,d){_hmt.push(["_trackEvent",a,b,c,d])}function enablePopup(){chrome.browserAction.setPopup({popup:"popup.html"})}function disablePopup(){chrome.browserAction.setPopup({popup:""})}function showEnableBtn(){chrome.browserAction.setIcon({path:{19:"images/icon-19.png",38:"images/icon-38.png"}})}function showDisableBtn(){chrome.browserAction.setIcon({path:{19:"images/icon-19_disable.png",38:"images/icon-38_disable.png"}})}function endTabCap(a){var b=capTabIDs.indexOf(a);-1!==b&&(chrome.tabs.getSelected(function(b){b.id===a&&showEnableBtn()}),capTabIDs.splice(b,1),chrome.browserAction.enable(a))}function send(a,b,c,d,e,f,g){var h,i,j,k,l;h=new XMLHttpRequest,i=!1,j=setTimeout(function(){i=!0,h.abort(),g&&g("网络请求超时")},e),h.open(b,a),h.onreadystatechange=function(){4===h.readyState&&(i||(clearTimeout(j),200===h.status&&f&&f(h.responseText)))},h.onerror=function(){g&&g("网络请求过程中发生错误")};for(k in c)h.setRequestHeader(k,c[k]);l=new FormData;for(k in d)l.append(k,d[k]);h.send(l)}function showReviewPanel(a,b){chrome.tabs.sendMessage(a,{event:"disPanel",imgData:b})}function getOCR(a,b,c,d,e){var f={from:b,image:a,timestamp:+new Date,to:c},g=new SparkMD5.ArrayBuffer,h=new FileReader;h.onload=function(){g.append(this.result);var a="";for(var c in f)a+="image"===c?c+g.end():c+f[c];f.sign=SparkMD5.hash(a+"df9527"),send("http://fanyi-api.baidu.com/api/trans/api/imgtrans","POST",null,f,2e4,d,e),tongjiRequest("OCR","请求","识别语种: "+("zh"===b?"中":"英")),tongjiRequest("翻译","请求","翻译语种: "+("zh"===b?"中译英":"英译中"))},h.readAsArrayBuffer(a)}function transStr(a,b,c,d,e){if(a&&a.length>0){var f=a,g="Fna32KI1n7GpL3ThkGsU",h="ocrtranslate",i="20151118000005731",j=SparkMD5.hash(i+f+h+g);send("http://api.fanyi.baidu.com/api/trans/vip/translate","POST",null,{q:f,from:b||"en",to:c||"zh",salt:h,appid:i,sign:j},2e4,d,e),tongjiRequest("翻译","请求","翻译语种: "+("zh"===b?"中译英":"英译中"))}}function getClipboardImage(a){var b=function(b){if(b.clipboardData){var c,d=b.clipboardData.items;if(!d)return;for(var e=0;e<d.length;e++)if(-1!==d[e].type.indexOf("image")){c=d[e].getAsFile();break}if(b.preventDefault(),c){var f=new window.FileReader;f.readAsDataURL(c),f.onloadend=function(){var b=new Image;b.onload=function(){var c=document.createElement("canvas"),d=c.getContext("2d");c.width=b.width,c.height=b.height,d.drawImage(b,0,0),c.toBlob(function(b){"function"==typeof a&&a(f.result,b)},"image/jpeg",.8)},b.onerror=function(){console.error("读取图片失败"),"function"==typeof a&&a()},b.src=f.result}}else"function"==typeof a&&a()}else"function"==typeof a&&a()},c=document.createElement("div");c.style.position="absolute",c.style.opacity=0,c.contentEditable=!0,c.setAttribute("contenteditable","true");for(var d=document.activeElement,e=d.nodeName.toLowerCase();"body"!==e&&"div"!==e&&"li"!==e&&"th"!==e&&"td"!==e;)d=d.parentNode,e=d.nodeName.toLowerCase();c.addEventListener("paste",b,!1),d.appendChild(c),c.focus(),document.execCommand("paste");var f=c.innerHTML;return c.removeEventListener("paste",b),d.removeChild(c),f}!function(a){"use strict";var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.Blob&&function(){try{return Boolean(new Blob)}catch(a){return!1}}(),d=c&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(a){return!1}}(),e=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,g=(c||e)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,g,h,i,j,k,l,m,n;if(b=a.match(f),!b)throw new Error("invalid data URI");for(g=b[2]?b[1]:"text/plain"+(b[3]||";charset=US-ASCII"),h=!!b[4],i=a.slice(b[0].length),j=h?atob(i):decodeURIComponent(i),k=new ArrayBuffer(j.length),l=new Uint8Array(k),m=0;m<j.length;m+=1)l[m]=j.charCodeAt(m);return c?new Blob([d?l:k],{type:g}):(n=new e,n.append(k),n.getBlob(g))};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,c,d){a(d&&b.toDataURL&&g?g(this.toDataURL(c,d)):this.mozGetAsFile("blob",c))}:b.toDataURL&&g&&(b.toBlob=function(a,b,c){a(g(this.toDataURL(b,c)))})),"function"==typeof define&&define.amd?define(function(){return g}):a.dataURLtoBlob=g}(window),function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;try{b=window}catch(c){b=self}b.SparkMD5=a()}}(function(a){"use strict";function b(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];c+=(d&e|~d&f)+b[0]-680876936|0,c=(c<<7|c>>>25)+d|0,f+=(c&d|~c&e)+b[1]-389564586|0,f=(f<<12|f>>>20)+c|0,e+=(f&c|~f&d)+b[2]+606105819|0,e=(e<<17|e>>>15)+f|0,d+=(e&f|~e&c)+b[3]-1044525330|0,d=(d<<22|d>>>10)+e|0,c+=(d&e|~d&f)+b[4]-176418897|0,c=(c<<7|c>>>25)+d|0,f+=(c&d|~c&e)+b[5]+1200080426|0,f=(f<<12|f>>>20)+c|0,e+=(f&c|~f&d)+b[6]-1473231341|0,e=(e<<17|e>>>15)+f|0,d+=(e&f|~e&c)+b[7]-45705983|0,d=(d<<22|d>>>10)+e|0,c+=(d&e|~d&f)+b[8]+1770035416|0,c=(c<<7|c>>>25)+d|0,f+=(c&d|~c&e)+b[9]-1958414417|0,f=(f<<12|f>>>20)+c|0,e+=(f&c|~f&d)+b[10]-42063|0,e=(e<<17|e>>>15)+f|0,d+=(e&f|~e&c)+b[11]-1990404162|0,d=(d<<22|d>>>10)+e|0,c+=(d&e|~d&f)+b[12]+1804603682|0,c=(c<<7|c>>>25)+d|0,f+=(c&d|~c&e)+b[13]-40341101|0,f=(f<<12|f>>>20)+c|0,e+=(f&c|~f&d)+b[14]-1502002290|0,e=(e<<17|e>>>15)+f|0,d+=(e&f|~e&c)+b[15]+1236535329|0,d=(d<<22|d>>>10)+e|0,c+=(d&f|e&~f)+b[1]-165796510|0,c=(c<<5|c>>>27)+d|0,f+=(c&e|d&~e)+b[6]-1069501632|0,f=(f<<9|f>>>23)+c|0,e+=(f&d|c&~d)+b[11]+643717713|0,e=(e<<14|e>>>18)+f|0,d+=(e&c|f&~c)+b[0]-373897302|0,d=(d<<20|d>>>12)+e|0,c+=(d&f|e&~f)+b[5]-701558691|0,c=(c<<5|c>>>27)+d|0,f+=(c&e|d&~e)+b[10]+38016083|0,f=(f<<9|f>>>23)+c|0,e+=(f&d|c&~d)+b[15]-660478335|0,e=(e<<14|e>>>18)+f|0,d+=(e&c|f&~c)+b[4]-405537848|0,d=(d<<20|d>>>12)+e|0,c+=(d&f|e&~f)+b[9]+568446438|0,c=(c<<5|c>>>27)+d|0,f+=(c&e|d&~e)+b[14]-1019803690|0,f=(f<<9|f>>>23)+c|0,e+=(f&d|c&~d)+b[3]-187363961|0,e=(e<<14|e>>>18)+f|0,d+=(e&c|f&~c)+b[8]+1163531501|0,d=(d<<20|d>>>12)+e|0,c+=(d&f|e&~f)+b[13]-1444681467|0,c=(c<<5|c>>>27)+d|0,f+=(c&e|d&~e)+b[2]-51403784|0,f=(f<<9|f>>>23)+c|0,e+=(f&d|c&~d)+b[7]+1735328473|0,e=(e<<14|e>>>18)+f|0,d+=(e&c|f&~c)+b[12]-1926607734|0,d=(d<<20|d>>>12)+e|0,c+=(d^e^f)+b[5]-378558|0,c=(c<<4|c>>>28)+d|0,f+=(c^d^e)+b[8]-2022574463|0,f=(f<<11|f>>>21)+c|0,e+=(f^c^d)+b[11]+1839030562|0,e=(e<<16|e>>>16)+f|0,d+=(e^f^c)+b[14]-35309556|0,d=(d<<23|d>>>9)+e|0,c+=(d^e^f)+b[1]-1530992060|0,c=(c<<4|c>>>28)+d|0,f+=(c^d^e)+b[4]+1272893353|0,f=(f<<11|f>>>21)+c|0,e+=(f^c^d)+b[7]-155497632|0,e=(e<<16|e>>>16)+f|0,d+=(e^f^c)+b[10]-1094730640|0,d=(d<<23|d>>>9)+e|0,c+=(d^e^f)+b[13]+681279174|0,c=(c<<4|c>>>28)+d|0,f+=(c^d^e)+b[0]-358537222|0,f=(f<<11|f>>>21)+c|0,e+=(f^c^d)+b[3]-722521979|0,e=(e<<16|e>>>16)+f|0,d+=(e^f^c)+b[6]+76029189|0,d=(d<<23|d>>>9)+e|0,c+=(d^e^f)+b[9]-640364487|0,c=(c<<4|c>>>28)+d|0,f+=(c^d^e)+b[12]-421815835|0,f=(f<<11|f>>>21)+c|0,e+=(f^c^d)+b[15]+530742520|0,e=(e<<16|e>>>16)+f|0,d+=(e^f^c)+b[2]-995338651|0,d=(d<<23|d>>>9)+e|0,c+=(e^(d|~f))+b[0]-198630844|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[7]+1126891415|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[14]-1416354905|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[5]-57434055|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[12]+1700485571|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[3]-1894986606|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[10]-1051523|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[1]-2054922799|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[8]+1873313359|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[15]-30611744|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[6]-1560198380|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[13]+1309151649|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[4]-145523070|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[11]-1120210379|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[2]+718787259|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[9]-343485551|0,d=(d<<21|d>>>11)+e|0,a[0]=c+a[0]|0,a[1]=d+a[1]|0,a[2]=e+a[2]|0,a[3]=f+a[3]|0}function c(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c}function d(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c}function e(a){var d,e,f,g,h,i,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(d=64;j>=d;d+=64)b(k,c(a.substring(d-64,d)));for(a=a.substring(d-64),e=a.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;e>d;d+=1)f[d>>2]|=a.charCodeAt(d)<<(d%4<<3);if(f[d>>2]|=128<<(d%4<<3),d>55)for(b(k,f),d=0;16>d;d+=1)f[d]=0;return g=8*j,g=g.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(g[2],16),i=parseInt(g[1],16)||0,f[14]=h,f[15]=i,b(k,f),k}function f(a){var c,e,f,g,h,i,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(c=64;j>=c;c+=64)b(k,d(a.subarray(c-64,c)));for(a=j>c-64?a.subarray(c-64):new Uint8Array(0),e=a.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;e>c;c+=1)f[c>>2]|=a[c]<<(c%4<<3);if(f[c>>2]|=128<<(c%4<<3),c>55)for(b(k,f),c=0;16>c;c+=1)f[c]=0;return g=8*j,g=g.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(g[2],16),i=parseInt(g[1],16)||0,f[14]=h,f[15]=i,b(k,f),k}function g(a){var b,c="";for(b=0;4>b;b+=1)c+=p[a>>8*b+4&15]+p[a>>8*b&15];return c}function h(a){var b;for(b=0;b<a.length;b+=1)a[b]=g(a[b]);return a.join("")}function i(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),a}function j(a,b){var c,d=a.length,e=new ArrayBuffer(d),f=new Uint8Array(e);for(c=0;d>c;c+=1)f[c]=a.charCodeAt(c);return b?f:e}function k(a){return String.fromCharCode.apply(null,new Uint8Array(a))}function l(a,b,c){var d=new Uint8Array(a.byteLength+b.byteLength);return d.set(new Uint8Array(a)),d.set(new Uint8Array(b),a.byteLength),c?d:d.buffer}function m(a){var b,c=[],d=a.length;for(b=0;d-1>b;b+=2)c.push(parseInt(a.substr(b,2),16));return String.fromCharCode.apply(String,c)}function n(){this.reset()}var o=function(a,b){return a+b&4294967295},p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==h(e("hello"))&&(o=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function b(a,b){return a=0|a||0,0>a?Math.max(a+b,0):Math.min(a,b)}ArrayBuffer.prototype.slice=function(c,d){var e,f,g,h,i=this.byteLength,j=b(c,i),k=i;return d!==a&&(k=b(d,i)),j>k?new ArrayBuffer(0):(e=k-j,f=new ArrayBuffer(e),g=new Uint8Array(f),h=new Uint8Array(this,j,e),g.set(h),f)}}(),n.prototype.append=function(a){return this.appendBinary(i(a)),this},n.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var d,e=this._buff.length;for(d=64;e>=d;d+=64)b(this._hash,c(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},n.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=h(this._hash),a&&(c=m(c)),this.reset(),c},n.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},n.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},n.prototype.setState=function(a){return this._buff=a.buff,this._length=a.length,this._hash=a.hash,this},n.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},n.prototype._finish=function(a,c){var d,e,f,g=c;if(a[g>>2]|=128<<(g%4<<3),g>55)for(b(this._hash,a),g=0;16>g;g+=1)a[g]=0;d=8*this._length,d=d.toString(16).match(/(.*?)(.{0,8})$/),e=parseInt(d[2],16),f=parseInt(d[1],16)||0,a[14]=e,a[15]=f,b(this._hash,a)},n.hash=function(a,b){return n.hashBinary(i(a),b)},n.hashBinary=function(a,b){var c=e(a),d=h(c);return b?m(d):d},n.ArrayBuffer=function(){this.reset()},n.ArrayBuffer.prototype.append=function(a){var c,e=l(this._buff.buffer,a,!0),f=e.length;for(this._length+=a.byteLength,c=64;f>=c;c+=64)b(this._hash,d(e.subarray(c-64,c)));return this._buff=f>c-64?new Uint8Array(e.buffer.slice(c-64)):new Uint8Array(0),this},n.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;e>b;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=h(this._hash),a&&(c=m(c)),this.reset(),c},n.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},n.ArrayBuffer.prototype.getState=function(){var a=n.prototype.getState.call(this);return a.buff=k(a.buff),a},n.ArrayBuffer.prototype.setState=function(a){return a.buff=j(a.buff,!0),n.prototype.setState.call(this,a)},n.ArrayBuffer.prototype.destroy=n.prototype.destroy,n.ArrayBuffer.prototype._finish=n.prototype._finish,n.ArrayBuffer.hash=function(a,b){var c=f(new Uint8Array(a)),d=h(c);return b?m(d):d},n}),function(){var a={},b={},c={id:"dbde2138a21c51046daee95420cafd36",dm:["fanyi.baidu.com/ocr-extension"],js:"tongji.baidu.com/hm-web/js/",etrk:[],icon:"",ctrk:!1,align:-1,nv:-1,vdur:18e5,age:31536e6,rec:0,rp:[],trust:0,vcard:0,qiao:0,lxb:0,conv:0,med:0,cvcc:"",cvcf:[],apps:""},d=void 0,e=!0,f=null,g=!1;b.cookie={},b.cookie.set=function(a,b,c){var d;c.H&&(d=new Date,d.setTime(d.getTime()+c.H)),document.cookie=a+"="+b+(c.domain?"; domain="+c.domain:"")+(c.path?"; path="+c.path:"")+(d?"; expires="+d.toGMTString():"")+(c.hb?"; secure":"")},b.cookie.get=function(a){return(a=RegExp("(^| )"+a+"=([^;]*)(;|$)").exec(document.cookie))?a[2]:f},b.h={},b.h.oa=function(a){return document.getElementById(a)},b.h.J=function(a,b){var c=[],d=[];if(!a)return d;for(;a.parentNode!=f;){for(var e=0,g=0,h=a.parentNode.childNodes.length,i=0;h>i;i++){var j=a.parentNode.childNodes[i];if(j.nodeName===a.nodeName&&(e++,j===a&&(g=e),g>0&&e>1))break}if((h=""!==a.id)&&b){c.unshift("#"+encodeURIComponent(a.id));break}h&&(h="#"+encodeURIComponent(a.id),h=0<c.length?h+">"+c.join(">"):h,d.push(h)),c.unshift(encodeURIComponent(String(a.nodeName).toLowerCase())+(e>1?"["+g+"]":"")),a=a.parentNode}return d.push(c.join(">")),d},b.h.$a=function(a){return(a=b.h.J(a,e))&&a.length?String(a[0]):""},b.h.Za=function(a){return b.h.J(a,g)},b.h.Xa=function(a,b){for(b=b.toUpperCase();(a=a.parentNode)&&1==a.nodeType;)if(a.tagName==b)return a;return f},b.h.pa=function(a){return 9===a.nodeType?a:a.ownerDocument||a.document},b.h.Ya=function(a){var c={top:0,left:0};if(!a)return c;var d=b.h.pa(a).documentElement;return"undefined"!=typeof a.getBoundingClientRect&&(c=a.getBoundingClientRect()),{top:c.top+(window.pageYOffset||d.scrollTop)-(d.clientTop||0),left:c.left+(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0)}},(b.h.Ea=function(){function a(){if(!a.A){a.A=e;for(var b=0,c=h.length;c>b;b++)h[b]()}}function b(){try{document.documentElement.doScroll("left")}catch(c){return void setTimeout(b,1)}a()}var c,d=g,h=[];return document.addEventListener?c=function(){document.removeEventListener("DOMContentLoaded",c,g),a()}:document.attachEvent&&(c=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c),a())}),function(){if(!d)if(d=e,"complete"===document.readyState)a.A=e;else if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,g),window.addEventListener("load",a,g);else if(document.attachEvent){document.attachEvent("onreadystatechange",c),window.attachEvent("onload",a);var h=g;try{h=window.frameElement==f}catch(i){}document.documentElement.doScroll&&h&&b()}}(),function(b){a.A?b():h.push(b)}}()).A=g,b.event={},b.event.c=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,function(b){c.call(a,b)}):a.addEventListener&&a.addEventListener(b,c,g)},b.event.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=g},function(){var a=b.event;return b.f={},b.f.Da=/msie (\d+\.\d+)/i.test(navigator.userAgent),b.f.Ba=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:d,b.f.cookieEnabled=navigator.cookieEnabled,b.f.javaEnabled=navigator.javaEnabled(),b.f.language=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",b.f.Ga=(window.screen.width||0)+"x"+(window.screen.height||0),b.f.colorDepth=window.screen.colorDepth||0,b.f.K=function(){var a;return a=a||document,parseInt(window.pageYOffset||a.documentElement.scrollTop||a.body&&a.body.scrollTop||0,10)},b.f.L=function(){var a=document;return parseInt(window.innerHeight||a.documentElement.clientHeight||a.body&&a.body.clientHeight||0,10)},b.f.orientation=0,function(){function c(){var a=0;window.orientation!==d&&(a=window.orientation),screen&&screen.orientation&&screen.orientation.angle!==d&&(a=screen.orientation.angle),b.f.orientation=a}c(),a.c(window,"orientationchange",c)}(),b.f}(),b.l={},b.l.parse=function(){return new Function('return (" + source + ")')()},b.l.stringify=function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=d[a];return b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})),'"'+a+'"'}function c(a){return 10>a?"0"+a:a}var d={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(d){switch(typeof d){case"undefined":return"undefined";case"number":return isFinite(d)?String(d):"null";case"string":return a(d);case"boolean":return String(d);default:if(d===f)return"null";if(d instanceof Array){var e,g,h,i=["["],j=d.length;for(g=0;j>g;g++)switch(h=d[g],typeof h){case"undefined":case"function":case"unknown":break;default:e&&i.push(","),i.push(b.l.stringify(h)),e=1}return i.push("]"),i.join("")}if(d instanceof Date)return'"'+d.getFullYear()+"-"+c(d.getMonth()+1)+"-"+c(d.getDate())+"T"+c(d.getHours())+":"+c(d.getMinutes())+":"+c(d.getSeconds())+'"';e=["{"],g=b.l.stringify;for(j in d)if(Object.prototype.hasOwnProperty.call(d,j))switch(h=d[j],typeof h){case"undefined":case"unknown":case"function":break;default:i&&e.push(","),i=1,e.push(g(j)+":"+g(h))}return e.push("}"),e.join("")}}}(),b.lang={},b.lang.d=function(a,b){return"[object "+b+"]"==={}.toString.call(a)},b.lang.cb=function(a){return b.lang.d(a,"Number")&&isFinite(a)},b.lang.fb=function(a){return b.lang.d(a,"String")},b.lang.j=function(a){return a.replace?a.replace(/'/g,"'0").replace(/\*/g,"'1").replace(/!/g,"'2"):a},b.localStorage={},b.localStorage.C=function(){if(!b.localStorage.g)try{b.localStorage.g=document.createElement("input"),b.localStorage.g.type="hidden",b.localStorage.g.style.display="none",b.localStorage.g.addBehavior("#default#userData"),document.getElementsByTagName("head")[0].appendChild(b.localStorage.g)}catch(a){return g}return e},b.localStorage.set=function(a,c,d){var e=new Date;e.setTime(e.getTime()+d||31536e6);try{window.localStorage?(c=e.getTime()+"|"+c,window.localStorage.setItem(a,c)):b.localStorage.C()&&(b.localStorage.g.expires=e.toUTCString(),b.localStorage.g.load(document.location.hostname),b.localStorage.g.setAttribute(a,c),b.localStorage.g.save(document.location.hostname))}catch(f){}},b.localStorage.get=function(a){if(window.localStorage){if(a=window.localStorage.getItem(a)){var c=a.indexOf("|"),d=a.substring(0,c)-0;if(d&&d>(new Date).getTime())return a.substring(c+1)}}else if(b.localStorage.C())try{return b.localStorage.g.load(document.location.hostname),b.localStorage.g.getAttribute(a)}catch(e){}return f},b.localStorage.remove=function(a){if(window.localStorage)window.localStorage.removeItem(a);else if(b.localStorage.C())try{b.localStorage.g.load(document.location.hostname),b.localStorage.g.removeAttribute(a),b.localStorage.g.save(document.location.hostname)}catch(c){}},b.sessionStorage={},b.sessionStorage.set=function(a,b){if(window.sessionStorage)try{window.sessionStorage.setItem(a,b)}catch(c){}},b.sessionStorage.get=function(a){return window.sessionStorage?window.sessionStorage.getItem(a):f},b.sessionStorage.remove=function(a){window.sessionStorage&&window.sessionStorage.removeItem(a)},b.aa={},b.aa.log=function(a,b){var c=new Image,d="mini_tangram_log_"+Math.floor(2147483648*Math.random()).toString(36);window[d]=c,c.onload=c.onerror=c.onabort=function(){c.onload=c.onerror=c.onabort=f,c=window[d]=f,b&&b(a)},c.src=a},b.S={},b.S.ua=function(){var a="";if(navigator.plugins&&navigator.mimeTypes.length){var b=navigator.plugins["Shockwave Flash"];b&&b.description&&(a=b.description.replace(/^.*\s+(\S+)\s+\S+$/,"$1"))}else if(window.ActiveXObject)try{(b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(a=b.GetVariable("$version"))&&(a=a.replace(/^.*\s+(\d+),(\d+).*$/,"$1.$2"))}catch(c){}return a},b.S.Wa=function(a,b,c,d,e){return'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="'+a+'" width="'+c+'" height="'+d+'"><param name="movie" value="'+b+'" /><param name="flashvars" value="'+(e||"")+'" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" name="'+a+'" width="'+c+'" height="'+d+'" src="'+b+'" flashvars="'+(e||"")+'" allowscriptaccess="always" /></object>'},b.url={},b.url.i=function(a,b){var c=a.match(RegExp("(^|&|\\?|#)("+b+")=([^&#]*)(&|$|#)",""));return c?c[3]:f},b.url.ab=function(a){return(a=a.match(/^(https?:)\/\//))?a[1]:f},b.url.ra=function(a){return(a=a.match(/^(https?:\/\/)?([^\/\?#]*)/))?a[2].replace(/.*@/,""):f},b.url.W=function(a){return(a=b.url.ra(a))?a.replace(/:\d+$/,""):a},b.url.J=function(a){return(a=a.match(/^(https?:\/\/)?[^\/]*(.*)/))?a[2].replace(/[\?#].*/,"").replace(/^$/,"/"):f},function(){function b(){for(var a=g,b=document.getElementsByTagName("script"),c=b.length,c=c>100?100:c,d=0;c>d;d++){var f=b[d].src;if(f&&0===f.indexOf("https://hm.baidu.com/h")){a=e;break}}return a}return a.na=b}();var h=a.na;a.D={bb:"http://tongji.baidu.com/hm-web/welcome/ico",$:"hm.baidu.com/hm.gif",ea:"baidu.com",ya:"hmmd",za:"hmpl",Pa:"utm_medium",xa:"hmkw",Ra:"utm_term",va:"hmci",Oa:"utm_content",Aa:"hmsr",Qa:"utm_source",wa:"hmcu",Na:"utm_campaign",r:0,m:Math.round(+new Date/1e3),U:Math.round(+new Date/1e3)%65535,protocol:"https:"===document.location.protocol?"https:":"http:",O:h()||"https:"===document.location.protocol?"https:":"http:",eb:0,Ta:6e5,gb:5e3,Ua:5,Va:1024,Sa:1,P:2147483647,ba:"cc cf ci ck cl cm cp cu cw ds vl ep et fl ja ln lo lt rnd si su v cv lv api sn ct u tt".split(" ")},function(){var b={p:{},c:function(a,b){this.p[a]=this.p[a]||[],this.p[a].push(b)},w:function(a,b){this.p[a]=this.p[a]||[];for(var c=this.p[a].length,d=0;c>d;d++)this.p[a][d](b)}};return a.G=b}(),function(){function c(a,b){var c=document.createElement("script");c.charset="utf-8",d.d(b,"Function")&&(c.readyState?c.onreadystatechange=function(){("loaded"===c.readyState||"complete"===c.readyState)&&(c.onreadystatechange=f,b())}:c.onload=function(){b()}),c.src=a;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(c,e)}var d=b.lang;return a.load=c}(),function(){function c(){return function(){a.b.a.nv=0,a.b.a.st=4,a.b.a.et=3,a.b.a.ep=a.F.sa()+","+a.F.qa(),a.b.k()}}function d(){clearTimeout(i);var a;t&&(a="visible"==document[t]),u&&(a=!document[u]),m="undefined"==typeof a?e:a,l&&n||!m||!o?!l||!n||m&&o||(s=g,r+=+new Date-q):(s=e,q=+new Date),l=m,n=o,i=setTimeout(d,100)}function f(a){var b=document,c="";if(a in b)c=a;else for(var d=["webkit","ms","moz","o"],e=0;e<d.length;e++){var f=d[e]+a.charAt(0).toUpperCase()+a.slice(1);if(f in b){c=f;break}}return c}function h(a){("focus"!=a.type&&"blur"!=a.type||!a.target||a.target==window)&&(o="focus"==a.type||"focusin"==a.type?e:g,d())}var i,j=b.event,k=a.G,l=e,m=e,n=e,o=e,p=+new Date,q=p,r=0,s=e,t=f("visibilityState"),u=f("hidden");return d(),function(){var a=t.replace(/[vV]isibilityState/,"visibilitychange");j.c(document,a,d),j.c(window,"pageshow",d),j.c(window,"pagehide",d),"object"==typeof document.onfocusin?(j.c(document,"focusin",h),j.c(document,"focusout",h)):(j.c(window,"focus",h),j.c(window,"blur",h))}(),a.F={sa:function(){return+new Date-p},qa:function(){return s?+new Date-q+r:r}},k.c("pv-b",function(){j.c(window,"unload",c())}),a.F}(),function(){var e=b.lang,f=a.D,g=a.load,h={Ca:function(b){if((window._dxt===d||e.d(window._dxt,"Array"))&&"undefined"!=typeof a.b){var h=a.b.I();g([f.protocol,"//datax.baidu.com/x.js?si=",c.id,"&dm=",encodeURIComponent(h)].join(""),b)}},Ma:function(a){(e.d(a,"String")||e.d(a,"Number"))&&(window._dxt=window._dxt||[],window._dxt.push(["_setUserId",a]))}};return a.ha=h}(),function(){function h(a,b,c,f){if(a!==d&&b!==d&&f!==d){if(""===a)return[b,c,f].join("*");a=String(a).split("!");for(var h,i=g,j=0;j<a.length;j++)if(h=a[j].split("*"),String(b)===h[0]){h[1]=c,h[2]=f,a[j]=h.join("*"),i=e;break}return i||a.push([b,c,f].join("*")),a.join("!")}}function i(a){for(var b in a)if({}.hasOwnProperty.call(a,b)){var c=a[b];j.d(c,"Object")||j.d(c,"Array")?i(c):a[b]=String(c)}}var j=b.lang,k=b.l,l=b.f,m=a.D,n=a.G,o=a.ha,p={s:[],B:0,Y:g,o:{T:"",page:""},init:function(){p.e=0,n.c("pv-b",function(){p.ia(),p.la()}),n.c("pv-d",function(){p.ma(),p.o.page=""}),n.c("stag-b",function(){a.b.a.api=p.e||p.B?p.e+"_"+p.B:"",a.b.a.ct=[decodeURIComponent(a.b.getData("Hm_ct_"+c.id)||""),p.o.T,p.o.page].join("!")}),n.c("stag-d",function(){a.b.a.api=0,p.e=0,p.B=0})},ia:function(){var a=window._hmt||[];(!a||j.d(a,"Array"))&&(window._hmt={id:c.id,cmd:{},push:function(){for(var a=window._hmt,b=0;b<arguments.length;b++){var c=arguments[b];j.d(c,"Array")&&(a.cmd[a.id].push(c),"_setAccount"===c[0]&&1<c.length&&/^[0-9a-f]{32}$/.test(c[1])&&(c=c[1],a.id=c,a.cmd[c]=a.cmd[c]||[]))}}},window._hmt.cmd[c.id]=[],window._hmt.push.apply(window._hmt,a))},la:function(){var a=window._hmt;if(a&&a.cmd&&a.cmd[c.id])for(var b=a.cmd[c.id],d=/^_track(Event|MobConv|Order|RTEvent)$/,e=0,f=b.length;f>e;e++){var g=b[e];d.test(g[0])?p.s.push(g):p.Q(g)}a.cmd[c.id]={push:p.Q}},ma:function(){if(0<p.s.length)for(var a=0,b=p.s.length;b>a;a++)p.Q(p.s[a]);p.s=f},Q:function(a){var b=a[0];p.hasOwnProperty(b)&&j.d(p[b],"Function")&&p[b](a)},_setAccount:function(a){1<a.length&&/^[0-9a-f]{32}$/.test(a[1])&&(p.e|=1)},_setAutoPageview:function(b){1<b.length&&(b=b[1],g===b||e===b)&&(p.e|=2,a.b.X=b)},_trackPageview:function(b){if(1<b.length&&b[1].charAt&&"/"===b[1].charAt(0)){p.e|=4,a.b.a.et=0,a.b.a.ep="",a.b.a.vl=l.K()+l.L(),a.b.M?(a.b.a.nv=0,a.b.a.st=4):a.b.M=e;var c=a.b.a.u,d=a.b.a.su;a.b.a.u=m.protocol+"//"+document.location.host+b[1],p.Y||(a.b.a.su=document.location.href),a.b.k(),a.b.a.u=c,a.b.a.su=d}},_trackEvent:function(b){2<b.length&&(p.e|=8,a.b.a.nv=0,a.b.a.st=4,a.b.a.et=4,a.b.a.ep=j.j(b[1])+"*"+j.j(b[2])+(b[3]?"*"+j.j(b[3]):"")+(b[4]?"*"+j.j(b[4]):""),a.b.k())},_setCustomVar:function(b){if(!(4>b.length)){var d=b[1],e=b[4]||3;if(d>0&&6>d&&e>0&&4>e){p.B++;for(var f=(a.b.a.cv||"*").split("!"),g=f.length;d-1>g;g++)f.push("*");f[d-1]=e+"*"+j.j(b[2])+"*"+j.j(b[3]),a.b.a.cv=f.join("!"),b=a.b.a.cv.replace(/[^1](\*[^!]*){2}/g,"*").replace(/((^|!)\*)+$/g,""),""!==b?a.b.setData("Hm_cv_"+c.id,encodeURIComponent(b),c.age):a.b.Fa("Hm_cv_"+c.id)}}},_setUserTag:function(b){if(!(3>b.length)){var e=j.j(b[1]);if(b=j.j(b[2]),e!==d&&b!==d){var f=decodeURIComponent(a.b.getData("Hm_ct_"+c.id)||""),f=h(f,e,1,b);a.b.setData("Hm_ct_"+c.id,encodeURIComponent(f),c.age)}}},_setVisitTag:function(a){if(!(3>a.length)){var b=j.j(a[1]);if(a=j.j(a[2]),b!==d&&a!==d){var c=p.o.T,c=h(c,b,2,a);p.o.T=c}}},_setPageTag:function(a){if(!(3>a.length)){var b=j.j(a[1]);if(a=j.j(a[2]),b!==d&&a!==d){var c=p.o.page,c=h(c,b,3,a);p.o.page=c}}},_setReferrerOverride:function(b){1<b.length&&(a.b.a.su=b[1].charAt&&"/"===b[1].charAt(0)?m.protocol+"//"+window.location.host+b[1]:b[1],p.Y=e)},_trackOrder:function(b){b=b[1],j.d(b,"Object")&&(i(b),p.e|=16,a.b.a.nv=0,a.b.a.st=4,a.b.a.et=94,a.b.a.ep=k.stringify(b),a.b.k())},_trackMobConv:function(b){(b={webim:1,tel:2,map:3,sms:4,callback:5,share:6}[b[1]])&&(p.e|=32,a.b.a.et=93,a.b.a.ep=b,a.b.k())},_trackRTPageview:function(b){b=b[1],j.d(b,"Object")&&(i(b),b=k.stringify(b),512>=encodeURIComponent(b).length&&(p.e|=64,a.b.a.rt=b))},_trackRTEvent:function(b){if(b=b[1],j.d(b,"Object")){i(b),b=encodeURIComponent(k.stringify(b));var c=function(b){var c=a.b.a.rt;p.e|=128,a.b.a.et=90,a.b.a.rt=b,a.b.k(),a.b.a.rt=c},d=b.length;if(900>=d)c.call(this,b);else for(var d=Math.ceil(d/900),e="block|"+Math.round(Math.random()*m.P).toString(16)+"|"+d+"|",f=[],g=0;d>g;g++)f.push(g),f.push(b.substring(900*g,900*g+900)),c.call(this,e+f.join("|")),f=[]}},_setUserId:function(a){a=a[1],o.Ca(),o.Ma(a)}};return p.init(),a.fa=p,a.fa}(),function(){function d(){"undefined"==typeof window["_bdhm_loaded_"+c.id]&&(window["_bdhm_loaded_"+c.id]=e,this.a={},this.X=e,this.M=g,this.init())}var f=b.url,h=b.aa,i=b.S,j=b.lang,k=b.cookie,l=b.f,m=b.localStorage,n=b.sessionStorage,o=a.D,p=a.G;return d.prototype={N:function(a,b){a="."+a.replace(/:\d+/,""),b="."+b.replace(/:\d+/,"");var c=a.indexOf(b);return c>-1&&c+b.length===a.length},Z:function(a,b){return a=a.replace(/^https?:\/\//,""),0===a.indexOf(b)},z:function(a){for(var b=0;b<c.dm.length;b++)if(-1<c.dm[b].indexOf("/")){if(this.Z(a,c.dm[b]))return e}else{var d=f.W(a);if(d&&this.N(d,c.dm[b]))return e}return g},I:function(){for(var a=document.location.hostname,b=0,d=c.dm.length;d>b;b++)if(this.N(a,c.dm[b]))return c.dm[b].replace(/(:\d+)?[\/\?#].*/,"");return a},V:function(){for(var a=0,b=c.dm.length;b>a;a++){var d=c.dm[a];if(-1<d.indexOf("/")&&this.Z(document.location.href,d))return d.replace(/^[^\/]+(\/.*)/,"$1")+"/"}return"/"},ta:function(){if(!document.referrer)return o.m-o.r>c.vdur?1:4;var a=g;return this.z(document.referrer)&&this.z(document.location.href)?a=e:(a=f.W(document.referrer),a=this.N(a||"",document.location.hostname)),a?o.m-o.r>c.vdur?1:4:3},getData:function(a){try{return k.get(a)||n.get(a)||m.get(a)}catch(b){}},setData:function(a,b,c){try{k.set(a,b,{domain:this.I(),path:this.V(),H:c}),c?m.set(a,b,c):n.set(a,b)}catch(d){}},Fa:function(a){try{k.set(a,"",{domain:this.I(),path:this.V(),H:-1}),n.remove(a),m.remove(a)}catch(b){}},Ka:function(){var a,b,d,e,f;if(o.r=this.getData("Hm_lpvt_"+c.id)||0,13===o.r.length&&(o.r=Math.round(o.r/1e3)),b=this.ta(),a=4!==b?1:0,d=this.getData("Hm_lvt_"+c.id)){for(e=d.split(","),f=e.length-1;f>=0;f--)13===e[f].length&&(e[f]=""+Math.round(e[f]/1e3));for(;2592e3<o.m-e[0];)e.shift();for(f=4>e.length?2:3,1===a&&e.push(o.m);4<e.length;)e.shift();d=e.join(","),e=e[e.length-1]}else d=o.m,e="",f=1;this.setData("Hm_lvt_"+c.id,d,c.age),this.setData("Hm_lpvt_"+c.id,o.m),d=o.m===this.getData("Hm_lpvt_"+c.id)?"1":"0",0===c.nv&&this.z(document.location.href)&&(""===document.referrer||this.z(document.referrer))&&(a=0,b=4),this.a.nv=a,this.a.st=b,this.a.cc=d,this.a.lt=e,this.a.lv=f},Ja:function(){for(var a=[],b=this.a.et,c=0,d=o.ba.length;d>c;c++){var e=o.ba[c],f=this.a[e];"undefined"!=typeof f&&""!==f&&("tt"!==e||"tt"===e&&0===b)&&("ct"!==e||"ct"===e&&0===b)&&a.push(e+"="+encodeURIComponent(f))}switch(b){case 0:a.push("sn="+o.U),this.a.rt&&a.push("rt="+encodeURIComponent(this.a.rt));break;case 3:a.push("sn="+o.U);break;case 90:this.a.rt&&a.push("rt="+this.a.rt)}return a.join("&")},La:function(){this.Ka(),this.a.si=c.id,this.a.su=document.referrer,this.a.ds=l.Ga,this.a.cl=l.colorDepth+"-bit",this.a.ln=String(l.language).toLowerCase(),this.a.ja=l.javaEnabled?1:0,this.a.ck=l.cookieEnabled?1:0,this.a.lo="number"==typeof _bdhm_top?1:0,this.a.fl=i.ua(),this.a.v="1.2.30",this.a.cv=decodeURIComponent(this.getData("Hm_cv_"+c.id)||""),this.a.tt=document.title||"",this.a.vl=l.K()+l.L();var a=document.location.href;this.a.cm=f.i(a,o.ya)||"",this.a.cp=f.i(a,o.za)||f.i(a,o.Pa)||"",this.a.cw=f.i(a,o.xa)||f.i(a,o.Ra)||"",this.a.ci=f.i(a,o.va)||f.i(a,o.Oa)||"",this.a.cf=f.i(a,o.Aa)||f.i(a,o.Qa)||"",this.a.cu=f.i(a,o.wa)||f.i(a,o.Na)||""},init:function(){try{this.La(),0===this.a.nv?this.Ia():this.R(".*"),a.b=this,this.ga(),p.w("pv-b"),this.Ha()}catch(b){var d=[];d.push("si="+c.id),d.push("n="+encodeURIComponent(b.name)),d.push("m="+encodeURIComponent(b.message)),d.push("r="+encodeURIComponent(document.referrer)),h.log(o.O+"//"+o.$+"?"+d.join("&"))}},Ha:function(){function a(){p.w("pv-d")}this.X?(this.M=e,this.a.et=0,this.a.ep="",this.a.vl=l.K()+l.L(),this.k(a)):a()},k:function(a){var b=this;b.a.rnd=Math.round(Math.random()*o.P),p.w("stag-b");var c=o.O+"//"+o.$+"?"+b.Ja();p.w("stag-d"),b.da(c),h.log(c,function(c){b.R(c),j.d(a,"Function")&&a.call(b)})},ga:function(){var a=document.location.hash.substring(1),b=RegExp(c.id),d=-1<document.referrer.indexOf(o.ea),e=f.i(a,"jn"),g=/^heatlink$|^select$|^pageclick$/.test(e);
a&&b.test(a)&&d&&g&&(this.a.rnd=Math.round(Math.random()*o.P),a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.setAttribute("charset","utf-8"),a.setAttribute("src",o.protocol+"//"+c.js+e+".js?"+this.a.rnd),e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(a,e))},da:function(a){var b=n.get("Hm_unsent_"+c.id)||"",d=this.a.u?"":"&u="+encodeURIComponent(document.location.href),b=encodeURIComponent(a.replace(/^https?:\/\//,"")+d)+(b?","+b:"");n.set("Hm_unsent_"+c.id,b)},R:function(a){var b=n.get("Hm_unsent_"+c.id)||"";b&&(a=encodeURIComponent(a.replace(/^https?:\/\//,"")),a=RegExp(a.replace(/([\*\(\)])/g,"\\$1")+"(%26u%3D[^,]*)?,?","g"),(b=b.replace(a,"").replace(/,$/,""))?n.set("Hm_unsent_"+c.id,b):n.remove("Hm_unsent_"+c.id))},Ia:function(){var a=this,b=n.get("Hm_unsent_"+c.id);if(b)for(var b=b.split(","),d=function(b){h.log(o.O+"//"+decodeURIComponent(b),function(b){a.R(b)})},e=0,f=b.length;f>e;e++)d(b[e])}},new d}(),function(){var c=b.event,d=b.l;try{if(window.performance&&performance.timing&&"undefined"!=typeof a.b){var e=function(a){var b=performance.timing,c=b[a+"Start"]?b[a+"Start"]:0;return a=b[a+"End"]?b[a+"End"]:0,{start:c,end:a,value:a-c>0?a-c:0}},f=function(){var b;b=e("navigation");var c=e("request");b={netAll:c.start-b.start,netDns:e("domainLookup").value,netTcp:e("connect").value,srv:e("response").start-c.start,dom:performance.timing.domInteractive-performance.timing.fetchStart,loadEvent:e("loadEvent").end-b.start},a.b.a.et=87,a.b.a.ep=d.stringify(b),a.b.k()};c.c(window,"load",function(){setTimeout(f,500)})}}catch(g){}}(),function(){var e=b.f,h=b.lang,i=b.event,j=b.l;if("undefined"!=typeof a.b&&(c.med||(!e.Da||7<e.Ba)&&c.cvcc)){var k,l,m,n,o=function(a){if(a.item){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}return[].slice.call(a)},p=function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&b.call(a,c,a[c])===g)return g},q=function(b,c){var d={};if(d.n=k,d.t="clk",d.v=b,c){var e=c.getAttribute("href"),g=c.getAttribute("onclick")?""+c.getAttribute("onclick"):f,i=c.getAttribute("id")||"";m.test(e)?(d.sn="mediate",d.snv=e):h.d(g,"String")&&m.test(g)&&(d.sn="wrap",d.snv=g),d.id=i}for(a.b.a.et=86,a.b.a.ep=j.stringify(d),a.b.k(),d=+new Date;400>=+new Date-d;);};if(c.med)l="/zoosnet",k="swt",m=/swt|zixun|call|chat|zoos|business|talk|kefu|openkf|online|\/LR\/Chatpre\.aspx/i,n={click:function(){for(var a,b,c=[],d=o(document.getElementsByTagName("a")),d=[].concat.apply(d,o(document.getElementsByTagName("area"))),d=[].concat.apply(d,o(document.getElementsByTagName("img"))),e=0,f=d.length;f>e;e++)a=d[e],b=a.getAttribute("onclick"),a=a.getAttribute("href"),(m.test(b)||m.test(a))&&c.push(d[e]);return c}};else if(c.cvcc){l="/other-comm",k="other",m=c.cvcc.q||d;var r=c.cvcc.id||d;n={click:function(){for(var a,b,c,e=[],f=o(document.getElementsByTagName("a")),f=[].concat.apply(f,o(document.getElementsByTagName("area"))),f=[].concat.apply(f,o(document.getElementsByTagName("img"))),g=0,h=f.length;h>g;g++)a=f[g],m!==d?(b=a.getAttribute("onclick"),c=a.getAttribute("href"),r?(a=a.getAttribute("id"),(m.test(b)||m.test(c)||r.test(a))&&e.push(f[g])):(m.test(b)||m.test(c))&&e.push(f[g])):r!==d&&(a=a.getAttribute("id"),r.test(a)&&e.push(f[g]));return e}}}if("undefined"!=typeof n&&"undefined"!=typeof m){var s;l+=/\/$/.test(l)?"":"/";var t=function(a,b){if(s===b)return q(l+a,b),g;if(h.d(b,"Array")||h.d(b,"NodeList"))for(var c=0,d=b.length;d>c;c++)if(s===b[c])return q(l+a+"/"+(c+1),b[c]),g};i.c(document,"mousedown",function(a){a=a||window.event,s=a.target||a.srcElement;var b={};for(p(n,function(a,c){b[a]=h.d(c,"Function")?c():document.getElementById(c)});s&&s!==document&&p(b,t)!==g;)s=s.parentNode})}}}(),function(){var d=b.h,e=b.lang,f=b.event,g=b.l;if("undefined"!=typeof a.b&&e.d(c.cvcf,"Array")&&0<c.cvcf.length){var h={ca:function(){for(var a,b=c.cvcf.length,e=0;b>e;e++)(a=d.oa(decodeURIComponent(c.cvcf[e])))&&f.c(a,"click",h.ka())},ka:function(){return function(){a.b.a.et=86;var b={n:"form",t:"clk"};b.id=this.id,a.b.a.ep=g.stringify(b),a.b.k()}}};d.Ea(function(){h.ca()})}}(),function(){var d=b.event,e=b.l;if(c.med&&"undefined"!=typeof a.b){var f=+new Date,g={n:"anti",sb:0,kb:0,clk:0},h=function(){a.b.a.et=86,a.b.a.ep=e.stringify(g),a.b.k()};d.c(document,"click",function(){g.clk++}),d.c(document,"keyup",function(){g.kb=1}),d.c(window,"scroll",function(){g.sb++}),d.c(window,"unload",function(){g.t=+new Date-f,h()}),d.c(window,"load",function(){setTimeout(h,5e3)})}}()}();var MAX_IMAGE_SIZE=3565158,capTabIDs=[],preImageSrc=null,preImageBlob=null;chrome.webRequest.onBeforeSendHeaders.addListener(function(a){if(-1!==a.url.indexOf("si=dbde2138a21c51046daee95420cafd36")){var b="http://fanyi.baidu.com/ocr-extension",c=!1;for(var d in a.requestHeaders)if(c="referer"===a.requestHeaders[d].name.toLowerCase()){a.requestHeaders[d].value=b;break}c||a.requestHeaders.push({name:"Referer",value:b})}return{requestHeaders:a.requestHeaders}},{urls:["http://hm.baidu.com/*","https://hm.baidu.com/*"]},["requestHeaders","blocking"]),chrome.windows.onFocusChanged.addListener(function(a){-1!==a?chrome.tabs.getSelected(a,function(a){a&&-1!==capTabIDs.indexOf(a.id)?showDisableBtn():showEnableBtn()}):showEnableBtn()}),chrome.tabs.onActivated.addListener(function(a){a&&(-1!==capTabIDs.indexOf(a.tabId)?showDisableBtn():showEnableBtn())}),chrome.tabs.onUpdated.addListener(function(a,b){var c=capTabIDs.indexOf(a);-1!==c&&"loading"===b.status&&(chrome.tabs.getSelected(function(b){b.id===a&&showEnableBtn()}),capTabIDs.splice(c,1),chrome.browserAction.enable(a))}),chrome.cookies.onChanged.addListener(function(a){"BDUSS"===a.cookie.name&&(a.removed?enablePopup():(disablePopup(),chrome.runtime.sendMessage({event:"loginSuccess"})))}),chrome.cookies.getAll({domain:".baidu.com",name:"BDUSS"},function(a){a.length>0?disablePopup():enablePopup()}),chrome.browserAction.onClicked.addListener(function(){getClipboardImage(function(a,b){a&&preImageSrc!==a&&b&&b.size<=MAX_IMAGE_SIZE?(preImageSrc=a,preImageBlob=b,chrome.tabs.getSelected(function(a){chrome.tabs.sendMessage(a.id,{event:"showClipboard",tabId:a.id,imageSrc:preImageSrc})})):chrome.tabs.getSelected(function(a){chrome.tabs.sendMessage(a.id,{event:"startCrop",tabId:a.id})})})}),chrome.runtime.onMessage.addListener(function(a){var b,c,d,e,f,g;switch(a.event){case"popupStartCrop":chrome.tabs.getSelected(function(a){chrome.tabs.sendMessage(a.id,{event:"startCrop",tabId:a.id})});break;case"relogin":enablePopup();break;case"startCropRsp":b=a.tabId,chrome.browserAction.disable(b),showDisableBtn(),capTabIDs.push(b);break;case"finCapture":b=a.tabId,c=a.captureArea,d=a.pixelRatio,f=a.fromLan,g=a.toLan,chrome.tabs.captureVisibleTab(chrome.windows.WINDOW_ID_CURRENT,{format:"jpeg"},function(a){var e=new Image;e.onload=function(){var a=document.createElement("canvas"),h=a.getContext("2d");a.width=c.width,a.height=c.height,h.drawImage(e,c.x*d,c.y*d,c.width*d,c.height*d,0,0,a.width,a.height),showReviewPanel(b,a.toDataURL("image/jpeg")),a.toBlob(function(a){a.size<=MAX_IMAGE_SIZE?getOCR(a,f,g,function(a){var c;try{c=JSON.parse(a)}catch(d){console.error(d),c={error_code:-1,error_msg:"接口发生其它异常"}}chrome.tabs.sendMessage(b,{event:"showOCR",ocrData:c});var e=parseInt(c.error_code);if(0===e)tongjiRequest("OCR","返回","正常"),tongjiRequest("翻译","返回","正常");else switch(e){case 1002:tongjiRequest("OCR","返回","错误: 帐号异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;case 1003:tongjiRequest("OCR","返回","错误: 操作频率太快"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;case 1007:tongjiRequest("OCR","返回","错误: 超过最高限制"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;default:tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}},function(a){console.error("getOCR",a),chrome.tabs.sendMessage(b,{event:"showError",errMsg:a}),tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}):(console.error("jpg is too big"),chrome.tabs.sendMessage(b,{event:"showError",errMsg:"图片文件过大 (要求小于3.4M)"}))},"image/jpeg",.8)},e.onerror=function(){console.error("读取图片失败"),chrome.tabs.sendMessage(b,{event:"showError",errMsg:"读取图片失败"})},e.src=a}),endTabCap(b);break;case"useClipboard":b=a.tabId,f=a.fromLan,g=a.toLan,showReviewPanel(b,preImageSrc),preImageBlob.size<=MAX_IMAGE_SIZE?getOCR(preImageBlob,f,g,function(a){var c;try{c=JSON.parse(a)}catch(d){console.error(d),c={error_code:-1,error_msg:"接口发生其它异常"}}chrome.tabs.sendMessage(b,{event:"showOCR",ocrData:c});var e=parseInt(c.error_code);if(0===e)tongjiRequest("OCR","返回","正常"),tongjiRequest("翻译","返回","正常");else switch(e){case 1002:tongjiRequest("OCR","返回","错误: 超过最高限制"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;case 1003:tongjiRequest("OCR","返回","错误: 帐号异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;default:tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}},function(a){console.error("getOCR",a),chrome.tabs.sendMessage(b,{event:"showError",errMsg:a}),tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}):(console.error("jpg is too big"),chrome.tabs.sendMessage(b,{event:"showError",errMsg:"图片文件过大 (要求<=3.4MB)"}));break;case"finEdit":b=a.tabId,f=a.fromLan,g=a.toLan,e=new Image,e.onload=function(){var a=document.createElement("canvas"),c=a.getContext("2d");a.width=e.width,a.height=e.height,c.drawImage(e,0,0),a.toBlob(function(a){a.size<=MAX_IMAGE_SIZE?getOCR(a,f,g,function(a){var c;try{c=JSON.parse(a)}catch(d){console.error(d),c={error_code:-1,error_msg:"接口发生其它异常"}}chrome.tabs.sendMessage(b,{event:"showOCR",ocrData:c});var e=parseInt(c.error_code);if(0===e)tongjiRequest("OCR","返回","正常"),tongjiRequest("翻译","返回","正常");else switch(e){case 1002:tongjiRequest("OCR","返回","错误: 超过最高限制"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;case 1003:tongjiRequest("OCR","返回","错误: 帐号异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常");break;default:tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}},function(a){console.error("getOCR",a),chrome.tabs.sendMessage(b,{event:"showError",errMsg:a}),tongjiRequest("OCR","返回","错误: 接口发生其它异常"),tongjiRequest("翻译","返回","错误: OCR异常导致翻译异常")}):(console.error("jpg is too big"),chrome.tabs.sendMessage(b,{event:"showError",errMsg:"图片文件过大 (要求<=3.4M)"}))},"image/jpeg",.8)},e.onerror=function(){console.error("读取图片失败"),chrome.tabs.sendMessage(b,{event:"showError",errMsg:"读取图片失败"})},e.src=a.imgData;break;case"cancelCapture":b=a.tabId,endTabCap(b);break;case"getTranslate":b=a.tabId,f=a.fromLan,g=a.toLan,transStr(a.str,f,g,function(a){chrome.tabs.sendMessage(b,{event:"showTrans",transData:a}),tongjiRequest("翻译","返回","正常")},function(a){console.error("getTranslate",a),chrome.tabs.sendMessage(b,{event:"showError",errMsg:a}),tongjiRequest("翻译","返回","错误: 翻译异常")});break;case"moreExplain":tongjiRequest("更多释义","点击")}}),function(){"use strict";function a(a){for(var b=chrome.manifest.content_scripts,c=b[0].js,d=b[0].css,e=0,f=c.length,g=d.length;f>e;e++)chrome.tabs.executeScript(a.id,{file:c[e]},function(b){var c=chrome.runtime.lastError;c&&console.log("tab: "+a.id+" tab url: "+a.url+" lastError: "+JSON.stringify(c))});for(e=0;g>e;e++)chrome.tabs.insertCSS(a.id,{file:d[e]},function(b){var c=chrome.runtime.lastError;c&&console.log("tab: "+a.id+" tab url: "+a.url+" lastError: "+JSON.stringify(c))})}function b(){chrome.windows.getAll({populate:!0},function(b){for(var c,d=0,e=b.length;e>d;d++){c=b[d];for(var f,g=0,h=c.tabs.length;h>g;g++)f=c.tabs[g],f.url.match(/(chrome.*:\/\/)|(data:)/gi)||a(f)}})}chrome.manifest=null,chrome.runtime.onInstalled.addListener(function(a){chrome.manifest=chrome.runtime.getManifest(),"install"===a.reason?b():"update"===a.reason&&b()})}(window);